#!/bin/sh

xrandr_data=$(xrandr --query)
outputs=$(echo "$xrandr_data" | grep " connected" | cut -d" " -f1)
mode=$(echo "$xrandr_data" | grep -oP '(?<=primary )[x\d]+')

for outp in $outputs ; do
    case $outp in
        # meep
        *LVDS*)
            laptop_output=$outp
            ;;
        # stinky
        *eDP*)
            laptop_output=$outp
            ;;
        *HDMI*)
            external_monitor=$outp
            ;;
    esac
done

if [ -n "$external_monitor" ]; then
    case $laptop_output in
        *LVDS*)
            xrandr --output $laptop_output --auto --pos 400x1200 --output $external_monitor --mode $mode --pos 0x0 --primary
            ;;
        *eDP*)
            xrandr --output $laptop_output --auto --pos 0x600 --output $external_monitor --mode $mode --pos 1920x0 --primary
            ;;
    esac
else
    xrandr --output $laptop_output --auto --primary
fi
