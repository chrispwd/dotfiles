#!/usr/bin/env bash

# Usage: dlog [DATESTRING]
# No DATESTRING defaults to "today"

input="today"

if [ -n "$1" ]; then
    input="$1"
fi

year="$(date --date="$input" '+%Y')"
daystr="$(date --date="$input" '+%a %b %e')"
echo "$year"
echo "$daystr.*$year"

regex="$daystr"

dir="${NOTES:-$(pwd)}"
echo "$dir"

log="* Log for $daystr, $year

$(rg --heading -N -g '!*_log_ignore*' -A 20 -e "$regex" $dir)
"

echo "$log"

